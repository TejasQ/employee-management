(this["webpackJsonpemployee-management"]=this["webpackJsonpemployee-management"]||[]).push([[0],{159:function(e,t,n){e.exports=n(281)},168:function(e,t,n){},275:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(3),i=n.n(o),c=n(60),l=n(44),s=n(131),u=n(110),p=n(8),E=n(24);function d(e){if(!e.ok)throw Error(e.statusText);return e}var m=RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i);function y(e){return Object.keys(e).reduce((function(t,n){var r,a=n.split("."),o=null;return t[a[0]]&&(o=t[a[0]]),a.length>1?(o?(t[a[0]][a[1]]=e[n],o=t):o=Object(E.a)({},a[0],Object(E.a)({},a[1],e[n])),r=o):r=Object(E.a)({},n,e[n]),Object(p.a)({},t,{},r)}),{})}function f(e){return Object.values(e).some((function(e){return e&&e.length>0}))}function h(e,t){return function(n){n({type:t?"UPDATE_EMPLOYEE_TO_EMPLOYEES_LIST":"ADD_EMPLOYEE_TO_EMPLOYEES_LIST",payload:e})}}function O(e){return function(t){t({type:"DELETE_EMPLOYEE_TO_EMPLOYEES_LIST",payload:e})}}function _(){return function(e){return e({type:"FETCH_EMPLOYEE_BEGIN"}),fetch("https://jsonplaceholder.typicode.com/users").then(d).then((function(e){return e.json()})).then((function(e){return e.map((function(e){var t=e.address;return e.key=e.id,e.formatted_address="".concat(t.suite," ").concat(t.street," ").concat(t.city),e}))})).then((function(t){return e({type:"FETCH_EMPLOYEE_SUCCESS",employees:t}),t})).catch((function(t){return e(function(e){return{type:"FETCH_EMPLOYEE_ERROR",error:e}}(t))}))}}var v={pending:!1,employees:[],error:null};function b(e){return function(t){t({type:"EDIT_EMPLOYEE",payload:e}),g(t)}}function g(e){return e({type:"OPEN_ADD_EMPLOYEE_MOPEL"})}function S(e){return e({type:"CLOSE_ADD_EMPLOYEE_MOPEL"})}function j(e){return function(t){t({type:"ON_ADD_EMPLOYEE_STEPPER_UPDATE",currentStep:e})}}function L(e){return function(t){return t({type:"ADD_EMPLOYEE_BEGIN"}),function(e){return fetch("https://jsonplaceholder.typicode.com/users",{method:"POST",body:e&&JSON.stringify(e)}).then(d).then((function(e){return e.json()}))}(e).then((function(e){return t({type:"ADD_EMPLOYEE_SUCCESS"}),e})).catch((function(e){return t(function(e){return{type:"ADD_EMPLOYEE_ERROR",error:e}}(e))}))}}var C={pending:!1,error:null,visible:!1,currentStep:0,employee:null,editing:!1};var P=Object(l.c)({employeeListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EMPLOYEE_BEGIN":return Object(p.a)({},e,{pending:!0});case"FETCH_EMPLOYEE_SUCCESS":return Object(p.a)({},e,{pending:!1,employees:t.employees});case"FETCH_EMPLOYEE_ERROR":return Object(p.a)({},e,{pending:!1,error:t.error});case"ADD_EMPLOYEE_TO_EMPLOYEES_LIST":return Object(p.a)({},e,{employees:[t.payload].concat(Object(u.a)(e.employees))});case"UPDATE_EMPLOYEE_TO_EMPLOYEES_LIST":var n=e.employees.findIndex((function(e){return e.id===t.payload.id}));return e.employees[n]=t.payload,Object(p.a)({},e,{employees:Object(u.a)(e.employees)});case"DELETE_EMPLOYEE_TO_EMPLOYEES_LIST":var r=e.employees.filter((function(e){return e.id!==t.payload}));return Object(p.a)({},e,{employees:r});default:return e}},employeeAddReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EMPLOYEE_BEGIN":return Object(p.a)({},e,{pending:!0});case"ADD_EMPLOYEE_SUCCESS":return Object(p.a)({},e,{pending:!1,employees:t.employees});case"ADD_EMPLOYEE_ERROR":return Object(p.a)({},e,{pending:!1,error:t.error});case"OPEN_ADD_EMPLOYEE_MOPEL":return Object(p.a)({},e,{visible:!0});case"CLOSE_ADD_EMPLOYEE_MOPEL":return Object(p.a)({},e,{visible:!1,currentStep:0});case"ON_ADD_EMPLOYEE_STEPPER_UPDATE":return Object(p.a)({},e,{currentStep:t.currentStep});case"EDIT_EMPLOYEE":return Object(p.a)({},e,{editing:!0,employee:t.payload});default:return e}}});n(168);var T=n(287),D=n(289),M=n(77),A=n(78),I=n(87),k=n(79),Y=n(88),x=n(15),R=n(283),F=n(135),w=n(284),N=n(290),U=n(291);function B(e){return function(t){return t({type:"DELETE_EMPLOYEE_BEGIN"}),function(e){return fetch("https://jsonplaceholder.typicode.com/users/".concat(e),{method:"DELETE"}).then(d).then((function(e){return e.json()}))}(e).then((function(e){return t({type:"DELETE_EMPLOYEE_SUCCESS"}),e})).catch((function(e){return t(function(e){return{type:"DELETE_EMPLOYEE_ERROR",error:e}}(e))}))}}var H=function(e){function t(){var e,n;Object(M.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(a)))).state={selectedRowKeys:[],employees:null},n.onChange=function(e){console.log(e),n.setState({selectedRowKeys:e})},n._deleteEmployee=function(e){n.props.dispatch(B(e)),n.props.dispatch(O(e))},n._editEmployee=function(e){var t=n.props.employees.find((function(t){return t.id===e}));n.props.dispatch(b(t))},n}return Object(Y.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.columns=[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Address",dataIndex:"formatted_address",key:"formatted_address"},{title:"Phone",dataIndex:"phone",key:"phone"},{title:"Action",dataIndex:"id",key:"id",render:function(t,n){return a.a.createElement("div",{key:(t||1).toString()},a.a.createElement(x.a,{onClick:function(){return console.log(e._editEmployee(t))},icon:a.a.createElement(N.a,null)}),a.a.createElement(R.a,{title:"you want to delete this employee\uff1f",okText:"obviously",cancelText:"No, my mistake",onConfirm:function(){return e._deleteEmployee(t)}},a.a.createElement(x.a,{icon:a.a.createElement(U.a,null)})))}}],this.props.dispatch(_())}},{key:"render",value:function(){var e=this.state.selectedRowKeys,t=this.props,n=t.error,r=t.employees,o=t.pending,i=r.map((function(e){var t=e.address;return e.key=e.id,e.formatted_address="".concat(t.suite," ").concat(t.street," ").concat(t.city),e}));if(n)return a.a.createElement("div",null,"Error! ",n.message);if(o)return a.a.createElement(D.a,{key:0,justify:"center"},a.a.createElement(F.a,{tip:"Loading Employees List.."}));var c={selectedRowKeys:e,onChange:this.onChange};return a.a.createElement(w.a,{rowSelection:c,columns:this.columns,dataSource:i})}}]),t}(r.Component),G=Object(c.b)((function(e){return{employees:e.employeeListReducer.employees,error:e.employeeListReducer.error,pending:e.employeeListReducer.pending}}))(H),z=n(288),J=n(286),K=n(86),V=n(285),W=n(292),Z=n(293),$=n(294),q=n(295),Q=n(296),X=n(297),ee=n(298),te=n(299),ne=n(300),re=n(301);function ae(e,t){return function(n){return n({type:"UPDATE_EMPLOYEE_BEGIN"}),function(e,t){return fetch("https://jsonplaceholder.typicode.com/users/".concat(e),{method:"PUT",body:t&&JSON.stringify(t)}).then(d).then((function(e){return e.json()}))}(e,t).then((function(e){return n({type:"UPDATE_EMPLOYEE_SUCCESS"}),e})).catch((function(e){return n(function(e){return{type:"UPDATE_EMPLOYEE_ERROR",error:e}}(e))}))}}var oe=z.a.Step,ie=function(e){function t(){var e,n;Object(M.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(I.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).formConfigs=[{placeholder:"Enter your Name",name:"name",inputType:"text",prefixIcon:a.a.createElement(W.a,null)},{placeholder:"Enter your Email",name:"email",inputType:"email",prefixIcon:a.a.createElement(Z.a,null),validator:function(e){return m.test(e)},validationError:"Email is not valid!"},{placeholder:"Enter your Phone",name:"phone",inputType:"phone",prefixIcon:a.a.createElement($.a,null),validator:function(e){return!isNaN(e)&&e.length>=10},validationError:"phone number should contain 10 number digit"},{placeholder:"Enter Address Suite",name:"address.suite",inputType:"text",tooltip:"Apartmant or Flat number",prefixIcon:a.a.createElement(q.a,null)},{placeholder:"Enter your Street",name:"address.street",inputType:"text",prefixIcon:a.a.createElement(Q.a,null)},{placeholder:"Enter your City",name:"address.city",inputType:"text",prefixIcon:a.a.createElement(Q.a,null)},{placeholder:"Enter ZipCode",name:"address.zipcode",inputType:"text",prefixIcon:a.a.createElement(Q.a,null)},{placeholder:"Enter username",name:"username",inputType:"text",prefixIcon:a.a.createElement(X.a,null),validator:function(e){return e.split(" ").length<=1},validationError:"username should not contain space",tooltip:"username should not contain space"},{placeholder:"Enter Company Name",name:"company.name",inputType:"text",prefixIcon:a.a.createElement(ee.a,null)},{placeholder:"Enter Company Catch Phrase",name:"company.catchPhrase",inputType:"text",tooltip:"Describe your company in short way",prefixIcon:a.a.createElement(te.a,null)},{placeholder:"Enter Company Website",name:"website",addonBefore:"http://",inputType:"text",tooltip:"Describe your company in short way",prefixIcon:a.a.createElement(ne.a,null)}],n.stepperDestribution=[Array.from(Array(7).keys(),(function(e){return n.formConfigs[e]})),Array.from(Array(n.formConfigs.length-7).keys(),(function(e){return n.formConfigs[e+7]}))],n.state=Object(p.a)({},n.getFormFieldsAsHashMap(n.formConfigs),{errors:n.getFormFieldsAsHashMap(n.formConfigs.filter((function(e){return!e.validator}))),formInvalid:!1}),n.handleFieldChange=function(e){e.preventDefault();var t=e.target,r=t.name,a=t.value,o=n.state.errors,i=n.formConfigs.find((function(e){return e.name===r}));i.validator&&!i.validator(a)?o[r]=i.validationError:o[r]="",f(Object(p.a)({},n.state,{errors:null,formInvalid:null}))&&n.setState({formInvalid:!1}),n.setState(Object(E.a)({errors:o},r,a))},n.showModal=function(){n.props.dispatch(g)},n.onChange=function(e){n.props.dispatch(j(e))},n.handleCancel=function(){n.clearFormState(),n.props.dispatch(S)},n.createInput=function(e,t){return a.a.createElement("div",{key:t.toString()},a.a.createElement(J.a,{size:"large",style:{marginTop:12},placeholder:e.placeholder,onChange:n.handleFieldChange,onBlur:n.handleFieldChange,addonBefore:e.addonBefore||"",defaultValue:n.state[e.name],noValidate:!0,name:e.name,type:e.type,prefix:e.prefixIcon,suffix:e.tooltip?a.a.createElement(K.a,{title:e.tooltip},a.a.createElement(re.a,{style:{color:"rgba(0,0,0,.45)"}})):a.a.createElement("span",null)}),a.a.createElement("span",{style:{color:"red",fontSize:12,marginLeft:14}},n.state.errors[e.name]))},n.handleSubmit=function(e){var t=n.props,r=t.onSave,a=t.isEditing;e.preventDefault();var o=!f(n.state.errors);if(f(Object(p.a)({},n.state,{errors:null,formInvalid:null}))&&o){var i=y(Object(p.a)({},n.state,{errors:null,formInvalid:null}));i.id=n.id,a?n.props.dispatch(ae(n.id,i)):n.props.dispatch(L(i)),n.handleCancel(),n.props.dispatch(r(i,a)),n.clearFormState()}else n.setState({formInvalid:!0})},n.clearFormState=function(){n.setState(Object(p.a)({},n.getFormFieldsAsHashMap(n.formConfigs,{})))},n}return Object(Y.a)(t,e),Object(A.a)(t,[{key:"getFormFieldsAsHashMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,n){return Object(p.a)({},e,Object(E.a)({},n.name,t[n.name]||""))}),{})}},{key:"showForm",value:function(e,t){return{display:e===t?"initial":"none"}}},{key:"editEmployee",value:function(e){var t,n=(t=e,Object.keys(t).reduce((function(e,n){var r,a=t[n];return r="object"==typeof a?Object.keys(a).reduce((function(e,t){var r=Object(E.a)({},"".concat(n,".").concat(t),a[t]);return Object(p.a)({},e,{},r)}),{}):Object(E.a)({},n,a),Object(p.a)({},e,{},r)}),{}));this.id=n.id,this.setState(Object(p.a)({},this.getFormFieldsAsHashMap(this.formConfigs,n)))}},{key:"componentDidUpdate",value:function(e,t){e.employee!==this.props.employee&&this.props.employee&&this.editEmployee(this.props.employee)}},{key:"render",value:function(){var e=this,t=this.state.formInvalid,n=this.props,r=n.visible,o=n.loading,i=n.current;return a.a.createElement("div",null,a.a.createElement(x.a,{type:"primary",onClick:this.showModal},"Add Employee"),a.a.createElement(V.a,{destroyOnClose:!0,maskClosable:!1,visible:r,title:"Add Employee",onOk:this.handleSubmit,onCancel:this.handleCancel,footer:[a.a.createElement("span",{key:"invalid",style:Object(p.a)({},this.showForm(t,!0),{paddingRight:12,color:"red"})},"Form Not Valid"),a.a.createElement(x.a,{key:"back",onClick:function(){return e.onChange(0)},style:this.showForm(i,1)},"Back"),a.a.createElement(x.a,{key:"next",onClick:function(){return e.onChange(1)},style:this.showForm(i,0),type:"primary"},"Next"),a.a.createElement(x.a,{style:this.showForm(i,1),key:"submit",type:"primary",loading:o,onClick:this.handleSubmit},"Submit")]},a.a.createElement(z.a,{type:"navigation",size:"small",current:i,onChange:this.onChange,className:"site-navigation-steps"},a.a.createElement(oe,{title:"Personal Info"}),a.a.createElement(oe,{title:"Company Info"})),a.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},this.stepperDestribution.map((function(t,n){return a.a.createElement("div",{key:n.toString(),style:e.showForm(i,n)},t.map((function(t,n){return e.createInput(t,n)})))})))))}}]),t}(r.Component),ce=Object(c.b)((function(e){return{employee:e.employeeAddReducer.employee,loading:e.employeeAddReducer.loading,visible:e.employeeAddReducer.visible,current:e.employeeAddReducer.currentStep,isEditing:e.employeeAddReducer.editing}}))(ie);n(275),n(276);var le=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(T.a,{ghost:!1,title:"Employee Management",subTitle:"this is active employee list",extra:[a.a.createElement(D.a,{key:0,justify:"end"},a.a.createElement(ce,{onSave:h}))]}),a.a.createElement(G,null))};i.a.render(a.a.createElement(c.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l.d)(P,e,Object(l.a)(s.a))}()},a.a.createElement(le,null)),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.8e9954e7.chunk.js.map